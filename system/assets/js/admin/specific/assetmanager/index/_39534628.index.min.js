!function(a){var b,c,d,e,f,g,h,i=a(".preside-tree-nav"),j=i.find(".tree-node"),k=a("#asset-listing-table"),l=k.find("thead > tr > th"),m=a(".title-and-actions-container").first(),n=a(".page-subtitle").first(),o=[],p=i18n.translateResource("preside-objects.asset:title"),q=cfrequest.folder||"";for(d=function(c,d){var f=c.data("folderId")||"",g=a(d.target);j.removeClass("selected"),c.addClass("selected"),g.hasClass("folder-name")&&c.parent().hasClass("tree-folder")&&e.toggleNode(c.parent()),q!==f&&a.ajax({url:buildAjaxLink("assetmanager.getFolderTitleAndActions"),data:{folder:f},method:"POST",success:function(a){q=f,m.html(a),n.html(c.find(".folder-name:first").html()),b&&b.fnPageChange("first")}})},f=function(){var b=k.find("th input:checkbox"),c=a("#multi-action-buttons");b.on("click",function(){var c=k.find("tr > td:first-child input:checkbox");c.each(function(){this.checked=b.is(":checked"),a(this).closest("tr").toggleClass("selected")})}),c.data("hidden",!0),k.on("click","th input:checkbox,tbody tr > td:first-child input:checkbox",function(){var a=k.find("tr > td:first-child input:checkbox:checked").length;g(!a),a&&c.data("hidden")?c.slideDown(250).data("hidden",!1).find("button").prop("disabled",!1):a||c.data("hidden")||c.slideUp(250).data("hidden",!0).find("button").prop("disabled",!0)})},h=function(){var b=a("#multi-action-form"),c=b.find("[name=multiAction]");a("#multi-action-buttons button").click(function(){c.val(a(this).attr("name"))})},g=function(b){k.find("tbody > tr").each(function(){b?a(this).attr("data-context-container","1"):a(this).removeAttr("data-context-container")})},i.presideTreeNav({onClick:d,collapseIcon:"fa-folder-open",expandIcon:"fa-folder"}),e=i.data("presideTreeNav"),o.push({sClass:"center",bSortable:!1,mData:"_checkbox",sWidth:"5em"}),c=1;c<l.length-1;c++)o.push({mData:a(l.get(c)).data("field"),sWidth:a(l.get(c)).data("width")||"auto"});o.push({sClass:"center",bSortable:!1,sWidth:"8em",mData:"_options"}),b=k.dataTable({aoColumns:o,bServerSide:!0,sAjaxSource:buildAjaxLink("assetmanager.assetsForListingGrid"),fnServerParams:function(a){a.push({name:"folder",value:q})},bProcessing:!1,bStateSave:!1,bPaginate:!1,bLengthChange:!1,aaSorting:[],sDom:"t",fnRowCallback:function(b){$row=a(b),$row.attr("data-context-container","1"),$row.addClass("clickable")},oLanguage:{oAria:{sSortAscending:i18n.translateResource("cms:datatables.sortAscending",{}),sSortDescending:i18n.translateResource("cms:datatables.sortDescending",{})},oPaginate:{sFirst:i18n.translateResource("cms:datatables.first",{data:[p],defaultValue:""}),sLast:i18n.translateResource("cms:datatables.last",{data:[p],defaultValue:""}),sNext:i18n.translateResource("cms:datatables.next",{data:[p],defaultValue:""}),sPrevious:i18n.translateResource("cms:datatables.previous",{data:[p],defaultValue:""})},sEmptyTable:i18n.translateResource("cms:datatables.emptyTable",{data:[p],defaultValue:""}),sInfo:i18n.translateResource("cms:datatables.info",{data:[p],defaultValue:""}),sInfoEmpty:i18n.translateResource("cms:datatables.infoEmpty",{data:[p],defaultValue:""}),sInfoFiltered:i18n.translateResource("cms:datatables.infoFiltered",{data:[p],defaultValue:""}),sInfoThousands:i18n.translateResource("cms:datatables.infoThousands",{data:[p],defaultValue:""}),sLengthMenu:i18n.translateResource("cms:datatables.lengthMenu",{data:[p],defaultValue:""}),sLoadingRecords:i18n.translateResource("cms:datatables.loadingRecords",{data:[p],defaultValue:""}),sProcessing:i18n.translateResource("cms:datatables.processing",{data:[p],defaultValue:""}),sZeroRecords:i18n.translateResource("cms:datatables.zeroRecords",{data:[p],defaultValue:""}),sSearch:"",sUrl:"",sInfoPostFix:""}}),f(),h()}(presideJQuery),function(a){var b,c,d,e,f,g,h=a("#asset-search-box");b=function(){c(function(a){var b={hint:!0,highlight:!0,minLength:1},c={source:a,displayKey:"text",templates:{suggestion:e}};h.typeahead(b,c),h.on("typeahead:selected",function(a,b){g(b)})})},c=function(a){var b=new Bloodhound({local:[],prefetch:h.data("prefetchUrl"),remote:h.data("remoteUrl"),datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.text)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:100,dupDetector:function(a,b){return a.value==b.value}});b.initialize().done(function(){a(b.ttAdapter())})},e=function(a){return Mustache.render(d,a)},g=function(b){a("body").presideLoadingSheen(!0),window.location=buildAdminLink("assetmanager","editasset",{asset:b.value})},f=function(){d='<div class="result-container"><div class="icon-container">{{{icon}}}</div> <div class="folder-and-text"><span class="folder">{{folder}}</span> <span class="title">{{text}}</span></div></div>'},h.length&&(f(),b())}(presideJQuery);
//# sourceMappingURL=_index.min.map