language: java

env:
  matrix:
  - PLATFORM=railo41
  - PLATFORM=railo42beta

before_script:
- mysql -e 'create database preside_test;'

install: ant -f support/build/ci/build.xml -Dsource=remote -Dwork.dir=$HOME/work -Dbuild.dir=$TRAVIS_BUILD_DIR -Dplatform=$PLATFORM install-ci-deps
script: ant -f support/build/ci/build.xml -Dsource=remote -Dwork.dir=$HOME/work -Dbuild.dir=$TRAVIS_BUILD_DIR -Dplatform=$PLATFORM test-ci

notifications:
  email: false
  hipchat:
    format: html
    rooms:
      secure: hc7ksUd+6XesAHnj3EAs4yyD+hmS+qOjFNx6qGaM+RFIG+KtWl4IpB02wwVYL3RS5g3ZJKXImw13FPlq4y71FBLdCX1Cc9+UR69aZ3QkAq/AG7hAA4tmRPSxgMW7VnEn8N8tzZrwQqaBalPkGiJi8gJXf+ypLh6WP48+7tfTKNQ=
